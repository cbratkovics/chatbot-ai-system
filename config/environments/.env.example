# AI Chatbot System Environment Configuration
# Copy this file to .env and update with your actual values
# NEVER commit .env file to version control

# ============================================
# AI Model Configuration
# ============================================

# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_API_VERSION=2024-02-01
OPENAI_DEFAULT_MODEL=gpt-4-turbo-preview
OPENAI_TIMEOUT_SECONDS=30
OPENAI_MAX_RETRIES=3

# Anthropic Configuration
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
ANTHROPIC_API_BASE=https://api.anthropic.com
ANTHROPIC_API_VERSION=2024-01-01
ANTHROPIC_DEFAULT_MODEL=claude-3-opus-20240229
ANTHROPIC_TIMEOUT_SECONDS=30
ANTHROPIC_MAX_RETRIES=3

# Meta Llama Configuration
LLAMA_API_ENDPOINT=http://localhost:11434
LLAMA_API_KEY=optional-api-key
LLAMA_DEFAULT_MODEL=llama-3-70b
LLAMA_TIMEOUT_SECONDS=60
LLAMA_MAX_RETRIES=2

# Model Router Configuration
DEFAULT_MODEL_PROVIDER=openai
MODEL_FALLBACK_ENABLED=true
MODEL_FALLBACK_ORDER=openai,anthropic,llama
MODEL_SELECTION_STRATEGY=latency_optimized
# Strategies: latency_optimized, cost_optimized, quality_optimized, balanced

# ============================================
# Database Configuration
# ============================================

# PostgreSQL
DATABASE_URL=postgresql://chatbot_user:secure_password@localhost:5432/chatbot_db
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=40
DATABASE_POOL_TIMEOUT=30
DATABASE_ECHO=false
DATABASE_SSL_MODE=prefer

# Redis Cache
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=optional_redis_password
REDIS_MAX_CONNECTIONS=100
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_DECODE_RESPONSES=true

# Vector Database (Pinecone/Qdrant/Weaviate)
VECTOR_DB_PROVIDER=pinecone
VECTOR_DB_URL=https://your-index.pinecone.io
VECTOR_DB_API_KEY=your-vector-db-api-key
VECTOR_DB_INDEX_NAME=chatbot-embeddings
VECTOR_DB_DIMENSION=1536
VECTOR_DB_METRIC=cosine

# ============================================
# Authentication & Security
# ============================================

# JWT Configuration
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ISSUER=ai-chatbot-system
JWT_AUDIENCE=ai-chatbot-api

# API Security
API_KEY_HEADER=X-API-Key
REQUIRE_API_KEY=false
MASTER_API_KEY=master-api-key-for-admin-access

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# ============================================
# Multi-tenancy Configuration
# ============================================

TENANT_ISOLATION_MODE=strict
# Modes: strict, shared, hybrid
DEFAULT_TENANT_ID=default
TENANT_HEADER=X-Tenant-ID
REQUIRE_TENANT_ID=true

# Rate Limiting (per tenant)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_REQUESTS_PER_HOUR=5000
RATE_LIMIT_TOKENS_PER_MINUTE=10000
RATE_LIMIT_TOKENS_PER_HOUR=500000
RATE_LIMIT_BURST_SIZE=20

# Usage Quotas (per tenant)
QUOTA_ENABLED=true
QUOTA_MONTHLY_REQUESTS=100000
QUOTA_MONTHLY_TOKENS=10000000
QUOTA_MAX_CONVERSATION_LENGTH=100
QUOTA_MAX_MESSAGE_LENGTH=4000

# ============================================
# Caching Configuration
# ============================================

# Semantic Cache
ENABLE_SEMANTIC_CACHE=true
SEMANTIC_CACHE_TTL_SECONDS=3600
SEMANTIC_CACHE_SIMILARITY_THRESHOLD=0.95
SEMANTIC_CACHE_MAX_ENTRIES=10000
SEMANTIC_CACHE_EMBEDDING_MODEL=text-embedding-ada-002

# Response Cache
RESPONSE_CACHE_TTL_SECONDS=300
RESPONSE_CACHE_MAX_SIZE_MB=100

# ============================================
# Performance Configuration
# ============================================

# Connection Pools
CONNECTION_POOL_SIZE=100
MAX_CONNECTIONS_PER_USER=5
CONNECTION_TIMEOUT_SECONDS=30

# Request Processing
REQUEST_TIMEOUT_SECONDS=30
MAX_REQUEST_SIZE_MB=10
STREAMING_CHUNK_SIZE=1024
STREAMING_TIMEOUT_SECONDS=120

# Circuit Breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60
CIRCUIT_BREAKER_EXPECTED_EXCEPTION=TimeoutError

# Retry Policy
RETRY_MAX_ATTEMPTS=3
RETRY_BACKOFF_FACTOR=2
RETRY_MAX_DELAY_SECONDS=30

# ============================================
# WebSocket Configuration
# ============================================

WS_ENABLED=true
WS_PATH=/ws
WS_HEARTBEAT_INTERVAL=30
WS_MAX_CONNECTIONS=1000
WS_MAX_CONNECTIONS_PER_USER=5
WS_MESSAGE_QUEUE_SIZE=1000
WS_RECONNECT_TIMEOUT=60
WS_PING_INTERVAL=25
WS_PONG_TIMEOUT=10

# ============================================
# Monitoring & Observability
# ============================================

# Distributed Tracing (Jaeger)
JAEGER_ENABLED=true
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_SERVICE_NAME=ai-chatbot-api
JAEGER_SAMPLER_TYPE=probabilistic
JAEGER_SAMPLER_PARAM=0.1

# Metrics (Prometheus)
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_PATH=/metrics

# Grafana
GRAFANA_ENABLED=true
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=admin

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE_PATH=/var/log/chatbot/app.log
LOG_FILE_MAX_SIZE_MB=100
LOG_FILE_BACKUP_COUNT=5
LOG_INCLUDE_TRACE_ID=true

# Sentry Error Tracking
SENTRY_ENABLED=false
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================
# Feature Flags
# ============================================

FEATURE_SEMANTIC_CACHE=true
FEATURE_MODEL_FALLBACK=true
FEATURE_USAGE_TRACKING=true
FEATURE_DISTRIBUTED_TRACING=true
FEATURE_WEBSOCKET_SUPPORT=true
FEATURE_STREAMING_RESPONSES=true
FEATURE_CONVERSATION_MEMORY=true
FEATURE_FUNCTION_CALLING=false
FEATURE_VISION_SUPPORT=false
FEATURE_VOICE_SUPPORT=false

# ============================================
# Application Settings
# ============================================

# Server Configuration
APP_NAME=AI Chatbot System
APP_VERSION=1.0.0
APP_ENV=development
APP_DEBUG=true
APP_HOST=0.0.0.0
APP_PORT=8000
APP_WORKERS=4
APP_RELOAD=true

# API Configuration
API_VERSION=v1
API_PREFIX=/api
API_DOCS_ENABLED=true
API_DOCS_PATH=/docs
API_REDOC_PATH=/redoc

# Session Configuration
SESSION_SECRET_KEY=your-session-secret-key
SESSION_COOKIE_NAME=chatbot_session
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax

# ============================================
# External Services
# ============================================

# Email Service (for notifications)
EMAIL_ENABLED=false
EMAIL_PROVIDER=smtp
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true
EMAIL_FROM_ADDRESS=noreply@ai-chatbot.com
EMAIL_FROM_NAME=AI Chatbot System

# Webhook Configuration
WEBHOOK_ENABLED=false
WEBHOOK_URL=https://your-webhook-endpoint.com
WEBHOOK_SECRET=webhook-secret-key
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_TIMEOUT_SECONDS=10

# ============================================
# Development Settings
# ============================================

# Development Tools
DEV_MODE=true
DEV_AUTO_RELOAD=true
DEV_CORS_ALLOW_ALL=true
DEV_SHOW_SQL_QUERIES=false
DEV_PROFILE_REQUESTS=false
DEV_MOCK_EXTERNAL_SERVICES=false

# Testing
TEST_DATABASE_URL=postgresql://test_user:test_password@localhost:5432/test_chatbot_db
TEST_REDIS_URL=redis://localhost:6379/1
TEST_DISABLE_RATE_LIMITING=true
TEST_DISABLE_AUTH=false

# ============================================
# Deployment Configuration
# ============================================

# Docker
DOCKER_REGISTRY=docker.io
DOCKER_IMAGE_NAME=ai-chatbot-api
DOCKER_IMAGE_TAG=latest

# Kubernetes
K8S_NAMESPACE=ai-chatbot
K8S_DEPLOYMENT_NAME=ai-chatbot-api
K8S_SERVICE_NAME=ai-chatbot-service
K8S_INGRESS_HOST=api.ai-chatbot.com

# Cloud Provider (AWS/GCP/Azure)
CLOUD_PROVIDER=aws
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_S3_BUCKET=ai-chatbot-storage

# ============================================
# Backup & Recovery
# ============================================

BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=ai-chatbot-backups
BACKUP_ENCRYPTION_KEY=backup-encryption-key

# ============================================
# Compliance & Audit
# ============================================

AUDIT_LOG_ENABLED=true
AUDIT_LOG_TABLE=audit_logs
AUDIT_LOG_RETENTION_DAYS=90
PII_DETECTION_ENABLED=true
PII_MASKING_ENABLED=true
GDPR_COMPLIANCE_MODE=false
DATA_RETENTION_DAYS=365