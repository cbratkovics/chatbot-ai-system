<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4299e1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2b6cb0;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad2" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#48bb78;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2f855a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad3" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ed8936;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c05621;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad4" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9f7aea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6b46c1;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Title -->
  <text x="600" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle">Multi-Tenant AI Chat Platform Architecture</text>

  <!-- Load Balancer -->
  <rect x="400" y="60" width="400" height="60" rx="10" fill="url(#grad1)" filter="url(#shadow)"/>
  <text x="600" y="90" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Load Balancer (HAProxy)</text>
  <text x="600" y="110" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">SSL Termination | Rate Limiting | Health Checks</text>

  <!-- Arrow down -->
  <line x1="600" y1="120" x2="600" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- WebSocket Gateway -->
  <rect x="400" y="150" width="400" height="60" rx="10" fill="url(#grad2)" filter="url(#shadow)"/>
  <text x="600" y="180" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">WebSocket Gateway</text>
  <text x="600" y="200" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Connection Management | Auth | Routing | Reconnection</text>

  <!-- Arrow down -->
  <line x1="600" y1="210" x2="600" y2="240" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- FastAPI Service Mesh -->
  <rect x="200" y="240" width="800" height="100" rx="10" fill="#f7fafc" stroke="#cbd5e0" stroke-width="2" filter="url(#shadow)"/>
  <text x="600" y="265" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">FastAPI Service Mesh</text>

  <!-- Service Mesh Components -->
  <rect x="220" y="280" width="180" height="45" rx="5" fill="url(#grad3)"/>
  <text x="310" y="305" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Tenant Middleware</text>
  <text x="310" y="320" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Context | Isolation | Auth</text>

  <rect x="410" y="280" width="180" height="45" rx="5" fill="url(#grad3)"/>
  <text x="500" y="305" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Orchestration Service</text>
  <text x="500" y="320" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Model Selection | Routing</text>

  <rect x="600" y="280" width="180" height="45" rx="5" fill="url(#grad3)"/>
  <text x="690" y="305" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Cache Service</text>
  <text x="690" y="320" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Semantic | Multi-tier</text>

  <rect x="790" y="280" width="180" height="45" rx="5" fill="url(#grad3)"/>
  <text x="880" y="305" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Streaming Service</text>
  <text x="880" y="320" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">SSE | Backpressure</text>

  <!-- Arrow down -->
  <line x1="600" y1="340" x2="600" y2="370" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Provider Adapter Layer -->
  <rect x="200" y="370" width="800" height="100" rx="10" fill="#f7fafc" stroke="#cbd5e0" stroke-width="2" filter="url(#shadow)"/>
  <text x="600" y="395" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Provider Adapter Layer</text>

  <!-- Provider Adapters -->
  <rect x="220" y="410" width="180" height="45" rx="5" fill="url(#grad4)"/>
  <text x="310" y="435" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">OpenAI Adapter</text>
  <text x="310" y="450" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">GPT-4 | GPT-3.5</text>

  <rect x="410" y="410" width="180" height="45" rx="5" fill="url(#grad4)"/>
  <text x="500" y="435" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Anthropic Adapter</text>
  <text x="500" y="450" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Claude 3 | Claude 2</text>

  <rect x="600" y="410" width="180" height="45" rx="5" fill="url(#grad4)"/>
  <text x="690" y="435" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Llama Adapter</text>
  <text x="690" y="450" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Llama 3 | Local</text>

  <rect x="790" y="410" width="180" height="45" rx="5" fill="url(#grad4)"/>
  <text x="880" y="435" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Custom Providers</text>
  <text x="880" y="450" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Enterprise Models</text>

  <!-- Arrow down -->
  <line x1="600" y1="470" x2="600" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Semantic Cache Layer -->
  <rect x="300" y="500" width="600" height="60" rx="10" fill="url(#grad2)" filter="url(#shadow)"/>
  <text x="600" y="530" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Semantic Cache Layer</text>
  <text x="600" y="550" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Vector Store | Similarity Search | TTL Management | 30% Cost Reduction</text>

  <!-- Arrow down -->
  <line x1="600" y1="560" x2="600" y2="590" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Model Router -->
  <rect x="300" y="590" width="600" height="60" rx="10" fill="url(#grad1)" filter="url(#shadow)"/>
  <text x="600" y="620" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Model Router</text>
  <text x="600" y="640" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Cost Optimization | Load Balancing | Circuit Breaker | Fallback Strategy</text>

  <!-- Arrow down -->
  <line x1="600" y1="650" x2="600" y2="680" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Observability Layer -->
  <rect x="200" y="680" width="800" height="100" rx="10" fill="#f7fafc" stroke="#cbd5e0" stroke-width="2" filter="url(#shadow)"/>
  <text x="600" y="705" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Observability Layer</text>

  <!-- Observability Components -->
  <rect x="220" y="720" width="180" height="45" rx="5" fill="#e53e3e"/>
  <text x="310" y="745" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Distributed Tracing</text>
  <text x="310" y="760" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Jaeger | OpenTelemetry</text>

  <rect x="410" y="720" width="180" height="45" rx="5" fill="#e53e3e"/>
  <text x="500" y="745" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Metrics Aggregation</text>
  <text x="500" y="760" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Prometheus | Grafana</text>

  <rect x="600" y="720" width="180" height="45" rx="5" fill="#e53e3e"/>
  <text x="690" y="745" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">Log Management</text>
  <text x="690" y="760" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">ELK Stack | Fluentd</text>

  <rect x="790" y="720" width="180" height="45" rx="5" fill="#e53e3e"/>
  <text x="880" y="745" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">APM & Alerting</text>
  <text x="880" y="760" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Custom Dashboards</text>

  <!-- Performance Metrics Box -->
  <rect x="50" y="810" width="250" height="80" rx="5" fill="#edf2f7" stroke="#a0aec0" stroke-width="1"/>
  <text x="175" y="835" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Performance Metrics</text>
  <text x="60" y="855" font-family="Arial, sans-serif" font-size="11">• 99.5% Uptime</text>
  <text x="60" y="870" font-family="Arial, sans-serif" font-size="11">• &lt;200ms P95 Latency</text>
  <text x="60" y="885" font-family="Arial, sans-serif" font-size="11">• 100+ WebSocket Connections</text>

  <!-- Enterprise Features Box -->
  <rect x="350" y="810" width="250" height="80" rx="5" fill="#edf2f7" stroke="#a0aec0" stroke-width="1"/>
  <text x="475" y="835" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Enterprise Features</text>
  <text x="360" y="855" font-family="Arial, sans-serif" font-size="11">• Multi-tenant Isolation</text>
  <text x="360" y="870" font-family="Arial, sans-serif" font-size="11">• Per-tenant Rate Limiting</text>
  <text x="360" y="885" font-family="Arial, sans-serif" font-size="11">• Cost Tracking & Billing</text>

  <!-- Reliability Patterns Box -->
  <rect x="650" y="810" width="250" height="80" rx="5" fill="#edf2f7" stroke="#a0aec0" stroke-width="1"/>
  <text x="775" y="835" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Reliability Patterns</text>
  <text x="660" y="855" font-family="Arial, sans-serif" font-size="11">• Circuit Breakers</text>
  <text x="660" y="870" font-family="Arial, sans-serif" font-size="11">• Exponential Backoff</text>
  <text x="660" y="885" font-family="Arial, sans-serif" font-size="11">• Graceful Degradation</text>

  <!-- Optimization Box -->
  <rect x="950" y="810" width="200" height="80" rx="5" fill="#edf2f7" stroke="#a0aec0" stroke-width="1"/>
  <text x="1050" y="835" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Optimizations</text>
  <text x="960" y="855" font-family="Arial, sans-serif" font-size="11">• Request Batching</text>
  <text x="960" y="870" font-family="Arial, sans-serif" font-size="11">• Connection Pooling</text>
  <text x="960" y="885" font-family="Arial, sans-serif" font-size="11">• Semantic Caching</text>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
      <polygon points="0 0, 10 5, 0 10" fill="#333"/>
    </marker>
  </defs>
</svg>
